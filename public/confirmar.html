<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Confirmar Presença</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        amareloGirassol: '#F9D923',
                        amareloEscuro: '#D6B30D',
                        begeClaro: '#FFFDF5',
                        pretoEscuro: '#1A202C',
                        fundoEscuro: '#222',
                        botaoPrimario: '#a1a270',
                        botaoPrimarioHover: '#8b8a5f',
                    },
                },
            },
        };
    </script>
    <style>
        html {
            font-family: Inter, sans-serif;
        }
    </style>
</head>

<body class="bg-fundoEscuro text-begeClaro min-h-screen flex flex-col items-center justify-center px-4">
    <div class="max-w-md w-full bg-[#2d2d2d] p-6 rounded-none shadow-lg">
        <h1 class="text-3xl text-begeClaro mb-6 text-center">Confirmar Presença</h1>
        <form id="confirmForm" class="flex flex-col gap-4">
            <label for="nome" class="text-begeClaro">Seu nome completo</label>
            <input type="text" id="nome" name="nome" placeholder="Digite seu nome" required
                class="w-full bg-[#1a1a1a] border border-[#a1a270] text-begeClaro px-3 py-2 rounded-none focus:outline-none focus:ring-2 focus:ring-botaoPrimario" />

            <label class="text-begeClaro">Eventos</label>
            <div class="flex gap-6">
                <label class="flex items-center gap-2">
                    <input type="checkbox" name="evento" value="casamento" class="accent-botaoPrimario" /> Casamento
                </label>
                <label class="flex items-center gap-2">
                    <input type="checkbox" name="evento" value="churrasco" class="accent-botaoPrimario" /> Churrasco
                </label>
            </div>

            <button type="submit"
                class="bg-botaoPrimario hover:bg-botaoPrimarioHover text-pretoEscuro px-6 py-2 rounded-none transition-colors duration-200">
                Confirmar
            </button>
        </form>

        <div id="mensagem" class="text-center mt-4"></div>
    </div>

    <div class="mt-8 max-w-md w-full space-y-6">

        <!-- Bloco casamento (um só, com data/hora + endereço) -->
        <div class="bg-[#2d2d2d] px-4 py-4 shadow-md mb-6 max-w-md w-full border border-[#a1a270] rounded-none">
            <div class="flex items-center gap-2 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-botaoPrimario" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <span class="text-begeClaro font-semibold">Casamento: Sexta, 04 de Julho de 2025 às 11:30</span>
            </div>
            <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-botaoPrimario" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                    style="transform: scale(1.25); transform-origin: center;">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 9 6.343 9 8s1.343 3 3 3z" />
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 21c4-4 7-7 7-11a7 7 0 10-14 0c0 4 3 7 7 11z" />
                </svg>
                <span class="text-begeClaro">Cartório Mucuripe, Av. da Abolição, 3220 - Meireles, Fortaleza - CE</span>
            </div>
        </div>
        <!-- Bloco churrasco (um só, com data/hora + endereço) -->
        <div class="bg-[#2d2d2d] px-4 py-4 shadow-md max-w-md w-full border border-[#a1a270] rounded-none">
            <div class="flex items-center gap-2 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-botaoPrimario" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <span class="text-begeClaro font-semibold">Churrasco: Sexta, 04 de Julho de 2025 às 14:30</span>
            </div>
            <div class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-botaoPrimario" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                    style="transform: scale(1.25); transform-origin: center;">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 9 6.343 9 8s1.343 3 3 3z" />
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 21c4-4 7-7 7-11a7 7 0 10-14 0c0 4 3 7 7 11z" />
                </svg>
                <span class="text-begeClaro">Fontana di Terni, Rua Pedro de Lima Martins, 57 - Cambeba, Fortaleza - CE</span>
            </div>
        </div>

    </div>

    <script>
        const form = document.getElementById('confirmForm');
        const mensagem = document.getElementById('mensagem');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const nome = form.nome.value.trim();
            const eventosSelecionados = Array.from(form.querySelectorAll('input[name="evento"]:checked')).map(el => el.value);

            if (!nome || eventosSelecionados.length === 0) {
                mensagem.textContent = 'Por favor, preencha seu nome e selecione pelo menos um evento.';
                return;
            }

            mensagem.textContent = 'Enviando confirmação...';

            try {
                for (const evento of eventosSelecionados) {
                    const res = await fetch('/api/confirmar-presenca', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ nome, quantidade: 1, tipo: evento }),
                    });

                    if (!res.ok) throw new Error('Erro ao confirmar presença');
                }

                mensagem.textContent = `Obrigado, ${nome}! Sua presença foi confirmada para ${eventosSelecionados.join(' e ')}.`;
                form.reset();
            } catch (error) {
                mensagem.textContent = 'Erro ao enviar confirmação. Tente novamente.';
            }
        });
    </script>
</body>

</html>